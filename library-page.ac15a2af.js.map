{"mappings":"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","sources":["src/js/utils/render.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-689f106a079a16dd.js","src/js/utils/localStorage.js","node_modules/@parcel/runtime-js/lib/runtime-0a459b2820bb7e66.js","src/js/utils/renderHtmlCards.js","src/js/modal/modal-template.js","src/js/modal/add-in-watched.js","src/js/modal/add-in-queue.js","src/js/modal/modal-film.js","src/js/film-list/film-watched.js","src/js/film-list/film-queue.js"],"sourcesContent":["/**\n * Render HTML.\n * @param {Object} parent\n * @param {Object} item\n */\n\nexport default function render(parent, item) {\n  parent.insertAdjacentHTML('beforeend', item);\n}\n","\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1zJhX\\\":\\\"library-page.ac15a2af.js\\\",\\\"c2tf3\\\":\\\"thumbnail.cedc50af.jpg\\\"}\"));","/**\n * Get from localStorage\n * @param {string} key\n */\nfunction getItem(key) {\n  return JSON.parse(localStorage.getItem(key));\n}\n\n/**\n * Set in localStorage\n * @param {string} key\n */\nfunction setItem(key, value) {\n  localStorage.setItem(key, JSON.stringify(value));\n}\n\nexport default { setItem, getItem };\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"c2tf3\")).toString();","import { render } from '../utils/index';\nimport ImagePlaceholder from '../../images/thumbnail.jpg';\n\nconst filmsListRef = document.querySelector('.films__list');\n\nexport async function renderCards(response) {\n  const filmCard = await createCard(response);\n  render(filmsListRef, filmCard);\n}\nasync function createCard({ allFilms, allGenres }) {\n  const films = await allFilms;\n  const geners = await allGenres;\n\n  return films\n    .map(film => {\n      const filmGeners = [];\n      pushGenerInFilmGeners({ geners, filmGeners, film });\n      addOtherInFilmgeners(filmGeners);\n      const filmGenerSpace = filmGeners.join(', ');\n      return marcapCard({ film, filmGenerSpace });\n    })\n    .join('');\n}\nfunction pushGenerInFilmGeners({ geners, filmGeners, film }) {\n  geners.map(gener => {\n    if (film.genre_ids.includes(gener.id)) {\n      filmGeners.push(gener.name);\n    }\n  });\n}\nfunction addOtherInFilmgeners(filmGeners) {\n  if (filmGeners.length > 2) {\n    filmGeners.splice(2);\n    filmGeners.push('Other');\n  }\n}\nfunction marcapCard({ film, filmGenerSpace }) {\n  const year = film.release_date.substr(0, 4);\n  return `\n       <li class=\"films__item\" >\n        <div class=\"films__card\">\n            <div class=\"films__img-container\">\n                <img\n                data-id=\"${film.id}\"\n                class=\"films__img\"\n                src=\"${\n                  film.poster_path\n                    ? 'https://image.tmdb.org/t/p/w500/' + film.poster_path\n                    : ImagePlaceholder\n                }\"\n                alt=\"${film.title}\"\n                loading=\"lazy\"\n                />\n            </div>\n            <div class=\"info\">\n                <p class=\"info__title\">${film.title}</p>\n                <p class=\"info__subtitle\">${filmGenerSpace} | ${year}</p>\n            </div>\n        </div>\n       </li> \n      `;\n}\n","/**\n * Modal template.\n * @param {Object} currentFilm\n * @param {Array} filmGeners\n */\nexport default function marcapModal(currentFilm, filmGeners) {\n  return `\n        <div class=\"modal-img-container\">\n          <img\n            class=\"modal-img\"\n            src=\"https://image.tmdb.org/t/p/w500/${currentFilm.poster_path}\"\n            alt=\"${addAudit(currentFilm.title)}\"\n          />\n        </div>\n        <div class=\"description\">\n          <h1 class=\"description__title\">${addAudit(currentFilm.title)}</h1>\n          <div class=\"info-stats\">\n            <ul class=\"info-stats__list\">\n              <li class=\"info-stats__item\">\n                <p class=\"info-stats__subtitle\">Vote / Votes</p>\n              </li>\n              <li class=\"info-stats__item\">\n                <p class=\"info-stats__subtitle\">Popularity</p>\n              </li>\n              <li class=\"info-stats__item\">\n                <p class=\"info-stats__subtitle\">Original Title</p>\n              </li>\n              <li class=\"info-stats__item\">\n                <p class=\"info-stats__subtitle\">Genre</p>\n              </li>\n            </ul>\n            <ul class=\"stats\">\n              <li class=\"stats__item\">\n                <p class=\"stats__subtitle\">\n                  <span class=\"rating\">${addAudit(\n                    currentFilm.vote_average.toFixed(1)\n                  )}</span>\n                  <span class=\"rating__or\">/</span>\n                  <span class=\"rating rating--white\">${addAudit(\n                    currentFilm.vote_count\n                  )}</span>\n                </p>\n              </li>\n              <li class=\"stats__item\"><p class=\"stats__subtitle\">${addAudit(\n                currentFilm.popularity.toFixed(1)\n              )}</p></li>\n              <li class=\"stats__item\">\n                <p class=\"stats__subtitle\">${addAudit(\n                  currentFilm.original_title\n                )}</p>\n              </li>\n              <li class=\"stats__item\">\n                <p class=\"stats__subtitle\">${addAudit(\n                  filmGeners.join(', ')\n                )}</p>\n              </li>\n            </ul>\n          </div>\n          <h2 class=\"about\">About</h2>\n          <p class=\"about__description\">\n             ${addAudit(currentFilm.overview)}\n          </p>\n          <button class=\"add-button add-watched-js\" type=\"button\" data-id=\"${\n            currentFilm.id\n          }\">add to Watched</button>\n          <button class=\"add-button add-queue-js\" type=\"button\" data-id=\"${\n            currentFilm.id\n          }\">add to queue</button>\n        </div>\n    `;\n}\n\nfunction addAudit(data) {\n  if (data.length === 0) {\n    return 'No information';\n  }\n  return data;\n}\n","import LocalStorage from '../utils/localStorage';\n\nexport default function addFilmInWatchedArray() {\n  const addWatched = document.querySelector('.add-watched-js');\n\n  textContentBtnDelete(addWatched);\n  addWatched.addEventListener('click', onClickWatchedBtn);\n\n  function onClickWatchedBtn() {\n    const filmsWatched = JSON.parse(localStorage.getItem('filmsWatched'));\n    const allFilms = LocalStorage.getItem('all-films');\n    const currentFilm = allFilms.results.find(\n      film => film.id === Number(addWatched.dataset.id)\n    );\n    if (filmsWatched) {\n      const repeatedFilm = filmsWatched.find(\n        film => film.id === Number(addWatched.dataset.id)\n      );\n      if (repeatedFilm) {\n        deleteFilm({ filmsWatched, repeatedFilm, addWatched });\n        return;\n      }\n      LocalStorage.setItem('filmsWatched', [...filmsWatched, currentFilm]);\n    } else {\n      LocalStorage.setItem('filmsWatched', [currentFilm]);\n    }\n    addWatched.textContent = 'DELETE TO WATCHED';\n  }\n}\n/**\n * если фильм в просмотренных пишем DELETE\n */\nfunction textContentBtnDelete(addWatched) {\n  const filmsWatched = JSON.parse(localStorage.getItem('filmsWatched'));\n  if (filmsWatched) {\n    const repeatedFilm = filmsWatched.find(\n      film => film.id === Number(addWatched.dataset.id)\n    );\n    if (repeatedFilm) {\n      addWatched.textContent = 'DELETE TO WATCHED';\n    }\n  }\n}\n///////////////////////////////////////////////////////////////////////////\n/**\n * удалить фильм из локал стореджа\n */\nfunction deleteFilm({ filmsWatched, repeatedFilm, addWatched }) {\n  const currentFilmindex = filmsWatched.findIndex(\n    film => film === repeatedFilm\n  );\n  filmsWatched.splice(currentFilmindex, 1);\n  localStorage.setItem('filmsWatched', JSON.stringify(filmsWatched));\n  addWatched.textContent = 'add to watched';\n}\n///////////////////////////////////////////////////////////////////////////\n","import LocalStorage from '../utils/localStorage';\n\nexport default function addFilmInWatchedArray() {\n  const addQueue = document.querySelector('.add-queue-js');\n  textContentBtnDelete(addQueue);\n  addQueue.addEventListener('click', onClickWatchedBtn);\n\n  function onClickWatchedBtn() {\n    const filmsQueue = JSON.parse(localStorage.getItem('filmsQueue'));\n    const allFilms = LocalStorage.getItem('all-films');\n    const currentFilm = allFilms.results.find(\n      film => film.id === Number(addQueue.dataset.id)\n    );\n    if (filmsQueue) {\n      const repeatedFilm = filmsQueue.find(\n        film => film.id === Number(addQueue.dataset.id)\n      );\n      if (repeatedFilm) {\n        deleteFilm({ filmsQueue, repeatedFilm, addQueue });\n        return;\n      }\n      LocalStorage.setItem('filmsQueue', [...filmsQueue, currentFilm]);\n    } else {\n      LocalStorage.setItem('filmsQueue', [currentFilm]);\n    }\n    addQueue.textContent = 'DELETE TO WATCHED';\n  }\n}\n/**\n * если фильм в просмотренных пишем DELETE\n */\nfunction textContentBtnDelete(addQueue) {\n  const filmsQueue = JSON.parse(localStorage.getItem('filmsQueue'));\n  if (filmsQueue) {\n    const repeatedFilm = filmsQueue.find(\n      film => film.id === Number(addQueue.dataset.id)\n    );\n    if (repeatedFilm) {\n      addQueue.textContent = 'delete to watched';\n    }\n  }\n}\n///////////////////////////////////////////////////////////////////////////\n/**\n * удалить фильм из локал стореджа\n */\nfunction deleteFilm({ filmsQueue, repeatedFilm, addQueue }) {\n  const currentFilmindex = filmsQueue.findIndex(film => film === repeatedFilm);\n  filmsQueue.splice(currentFilmindex, 1);\n  localStorage.setItem('filmsQueue', JSON.stringify(filmsQueue));\n  addQueue.textContent = 'add to queue';\n}\n///////////////////////////////////////////////////////////////////////////\n","import { LocalStorage, render } from '../utils';\nimport marcapModal from './modal-template';\nimport { renderCards } from '../utils/index';\nimport addFilmInWatchedArray from './add-in-watched';\nimport addFilmInQueueArray from './add-in-queue';\n\nconst refs = {\n  filmList: document.querySelector('.films__list'),\n  backdrop: document.querySelector('.modal-backdrop'),\n  modalContainer: document.querySelector('.modal-container'),\n};\n\n/**\n * Открытие модального окна ниже\n */\nexport function onOpenModalWithSingleFilm(e) {\n  const filmCollection = LocalStorage.getItem('all-films');\n  if (e.target.className !== 'films__img') {\n    return;\n  }\n  const currentFilm = filmCollection.results.find(film => {\n    return parseInt(film.id) === parseInt(e.target.dataset.id);\n  });\n\n  const template = renderMarcap(currentFilm);\n  render(refs.modalContainer, template);\n  /**\n   * Watched and queue buttons\n   */\n  addFilmInWatchedArray();\n  addFilmInQueueArray();\n  ///////////////////////////////\n  /**\n   * Закрыть модальное окно и убрать за собой все следы\n   */\n  const buttonClose = document.querySelector('.button-close');\n  buttonClose.addEventListener('click', onCloseModalWindow);\n  refs.backdrop.classList.add('active');\n  document.body.style = 'overflow: hidden';\n  refs.backdrop.addEventListener('click', onClickBeckdropCloseModalWindow);\n  window.addEventListener('keydown', onEscCloseModalWindow);\n}\nfunction renderMarcap(currentFilm) {\n  const filmGeners = [];\n  pushGenerInFilmGeners(currentFilm, filmGeners);\n\n  return marcapModal(currentFilm, filmGeners);\n}\nfunction pushGenerInFilmGeners(currentFilm, filmGeners) {\n  const generCollection = LocalStorage.getItem('all-geners');\n  generCollection.genres.map(genre => {\n    if (currentFilm.genre_ids.includes(genre.id)) {\n      filmGeners.push(genre.name);\n    }\n  });\n}\n/**\n * Закрытие модального окна ниже\n */\n\nfunction onCloseModalWindow(e) {\n  if (e.target.className !== 'custom-icon') {\n    return;\n  }\n  removeModal();\n}\nfunction onClickBeckdropCloseModalWindow(e) {\n  if (e.target.className !== 'modal-backdrop active') {\n    return;\n  }\n  removeModal();\n  refs.backdrop.removeEventListener('click', onClickBeckdropCloseModalWindow);\n}\nfunction onEscCloseModalWindow(e) {\n  if (e.key !== 'Escape') {\n    return;\n  }\n  refs.backdrop.classList.remove('active');\n  refs.modalContainer.innerHTML = `\n    <button class=\"button-close\" type=\"button\">\n        <div class=\"custom-icon\"></div>\n    </button>`;\n  window.removeEventListener('keydown', onEscCloseModalWindow);\n}\nfunction removeModal() {\n  refs.backdrop.classList.remove('active');\n  document.body.style = '';\n  refs.modalContainer.innerHTML = `\n    <button class=\"button-close\" type=\"button\">\n        <div class=\"custom-icon\"></div>\n    </button>`;\n  /**\n   * Удалить фильм из списка просмотренных при закрытии модалнього окна\n   */\n\n  const filmLibrary = document.querySelector('.film--library');\n  if (filmLibrary) {\n    removeFilmFromList(filmLibrary);\n  }\n}\nfunction removeFilmFromList(filmLibrary) {\n  const filmList = document.querySelector('.films__list');\n  const filmSection = document.querySelector('.film-section');\n  const libraryContainer = document.querySelector('.library-container');\n  const watchedBtn = document.querySelector('[data-watched]');\n  const queueBtn = document.querySelector('[data-queue]');\n\n  let allFilms = null;\n\n  if (watchedBtn.classList.contains('is-active')) {\n    allFilms = JSON.parse(localStorage.getItem('filmsWatched'));\n  }\n  if (queueBtn.classList.contains('is-active')) {\n    allFilms = JSON.parse(localStorage.getItem('filmsQueue'));\n  }\n\n  const allGenres = JSON.parse(localStorage.getItem('all-geners')).genres;\n  if (!allFilms || allFilms.length === 0) {\n    filmList.innerHTML = '';\n    libraryContainer.innerHTML = `<h1 class=\"film-title\">Your list is empty</h1><ul class=\"film film--library\"></ul>`;\n    filmSection.classList.add('library-plug');\n    return;\n  }\n  filmLibrary.innerHTML = '';\n  renderCards({ allFilms, allGenres });\n}\n","import { renderCards } from '../utils/index';\nimport { onOpenModalWithSingleFilm } from '../modal/modal-film';\n\nconst refs = {\n  filmList: document.querySelector('.films__list'),\n  watchedBtn: document.querySelector('[data-watched]'),\n  queueBtn: document.querySelector('[data-queue]'),\n  filmTitle: document.querySelector('.film-title'),\n  filmSection: document.querySelector('.film-section'),\n  libraryContainer: document.querySelector('.library-container'),\n};\n\nrefs.watchedBtn.addEventListener('click', onClickWatchedBtn);\n\nasync function onClickWatchedBtn(e) {\n  const allFilms = JSON.parse(localStorage.getItem('filmsWatched'));\n  const allGenres = JSON.parse(localStorage.getItem('all-geners')).genres;\n  refs.filmList.innerHTML = '';\n  refs.watchedBtn.classList.add('is-active');\n  refs.queueBtn.classList.remove('is-active');\n\n  onOpenModalWithSingleFilm(e, allFilms);\n\n  refs.filmList.removeEventListener('click', onOpenModalWithSingleFilm);\n  refs.filmList.addEventListener('click', onOpenModalWithSingleFilm);\n\n  if (!allFilms || allFilms.length === 0) {\n    refs.filmList.innerHTML = '';\n    refs.libraryContainer.innerHTML = `<h1 class=\"film-title\">Your list is empty</h1><ul class=\"film film--library\"></ul>`;\n    refs.filmSection.classList.add('library-plug');\n    return;\n  }\n\n  refs.filmSection.classList.remove('library-plug');\n  refs.filmTitle.remove();\n  renderCards({ allFilms, allGenres });\n}\n/**\n * удалить фильм из списка ожидания\n */\n","import { renderCards } from '../utils/index';\nimport { onOpenModalWithSingleFilm } from '../modal/modal-film';\n\nconst refs = {\n  filmList: document.querySelector('.films__list'),\n  watchedBtn: document.querySelector('[data-watched]'),\n  queueBtn: document.querySelector('[data-queue]'),\n  filmTitle: document.querySelector('.film-title'),\n  filmSection: document.querySelector('.film-section'),\n  libraryContainer: document.querySelector('.library-container'),\n};\n\nrefs.queueBtn.addEventListener('click', onClickQueue);\n\nasync function onClickQueue(e) {\n  const allFilms = JSON.parse(localStorage.getItem('filmsQueue'));\n  const allGenres = JSON.parse(localStorage.getItem('all-geners')).genres;\n  refs.filmList.innerHTML = '';\n  refs.queueBtn.classList.add('is-active');\n  refs.watchedBtn.classList.remove('is-active');\n\n  onOpenModalWithSingleFilm(e, allFilms);\n\n  refs.filmList.removeEventListener('click', onOpenModalWithSingleFilm);\n  refs.filmList.addEventListener('click', onOpenModalWithSingleFilm);\n\n  if (!allFilms || allFilms.length === 0) {\n    refs.filmList.innerHTML = '';\n    refs.libraryContainer.innerHTML = `<h1 class=\"film-title\">Your list is empty</h1><ul class=\"film film--library\"></ul>`;\n    refs.filmSection.classList.add('library-plug');\n    return;\n  }\n\n  refs.filmSection.classList.remove('library-plug');\n  refs.filmTitle.remove();\n  renderCards({ allFilms, allGenres });\n}\n/**\n * удалить фильм из списка ожидания\n */\n"],"names":["$8fec21839ab13f76$export$2e2bcd8739ae039","parent","item","insertAdjacentHTML","$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$a73b202311c5eb06$export$2e2bcd8739ae039","key","value","localStorage","setItem","stringify","getItem","$03931b928bc5f8a5$exports","URL","resolve","url","toString","$07744d7d84351cb9$var$filmsListRef","document","querySelector","async","$07744d7d84351cb9$export$e483d52d8d6686e1","response","filmCard","allFilms","allGenres","films","geners","map","film","filmGeners","gener","genre_ids","includes","push","name","$07744d7d84351cb9$var$pushGenerInFilmGeners","splice","$07744d7d84351cb9$var$addOtherInFilmgeners","filmGenerSpace","year","release_date","substr","poster_path","$parcel$interopDefault","title","$07744d7d84351cb9$var$marcapCard","join","$07744d7d84351cb9$var$createCard","$4195ef275819281b$export$2e2bcd8739ae039","currentFilm","$4195ef275819281b$var$addAudit","vote_average","toFixed","vote_count","popularity","original_title","overview","data","$0398263c58950590$export$2e2bcd8739ae039","addWatched","filmsWatched","find","Number","dataset","textContent","$0398263c58950590$var$textContentBtnDelete","addEventListener","results","repeatedFilm","currentFilmindex","findIndex","$0398263c58950590$var$deleteFilm","$d519ad87cfe2bb33$export$2e2bcd8739ae039","addQueue","filmsQueue","$d519ad87cfe2bb33$var$textContentBtnDelete","$d519ad87cfe2bb33$var$deleteFilm","$dbbd55f4351576be$var$refs","filmList","backdrop","modalContainer","$dbbd55f4351576be$export$2c3c00e01a7d40b","e","filmCollection","target","className","template","genres","genre","$dbbd55f4351576be$var$pushGenerInFilmGeners","$dbbd55f4351576be$var$renderMarcap","parseInt","$dbbd55f4351576be$var$onCloseModalWindow","classList","add","body","style","$dbbd55f4351576be$var$onClickBeckdropCloseModalWindow","window","$dbbd55f4351576be$var$onEscCloseModalWindow","$dbbd55f4351576be$var$removeModal","removeEventListener","remove","innerHTML","filmLibrary","filmSection","libraryContainer","watchedBtn","queueBtn","contains","$dbbd55f4351576be$var$removeFilmFromList","$917334fce02af156$var$refs","filmTitle","$0012688c1586ec01$var$refs"],"version":3,"file":"library-page.ac15a2af.js.map"}